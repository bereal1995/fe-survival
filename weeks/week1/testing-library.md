---
description: Test에 대해 알아보자
---
# Testing Library

## jest

거의 모든 것을 갖춘 테스팅 도구.  
Jest는 테스트를 위한 프레임워크이다.

- describe, it을 지원한다.
- expect로 단언 할 수 있다.
- mocking도 지원한다.

## Describe-Context-It 패턴

BDD(Behavior Driven Development)에서 나온 패턴이다.  
Given-When-Then 패턴과 비슷하다.

- describe: 테스트 대상을 설명
- context: 테스트 대상이 놓인 상황
- it: 테스트 대상에 대한 구체적인 행동
- 이렇게 패턴을 사용하면 테스트 코드를 읽기 쉽고(계층구조), 테스트 대상을 명확하게 알 수 있다.
- 패턴을 통해 작성하다 보면 테스트 대상에 대해 여러가지 생각을 하게되고, 이를 통해 빠트린 케이스를 발견할 가능성이 높아진다.

## Given - When - Then 패턴

BDD(Behavior Driven Development)에서 나온 패턴이다.  
시나리오 기반으로 테스트를 작성할 때 유용하다.

- Given: 동작에 대한 전제 조건
- When: 테스트 대상에 대한 행동
- Then: 예상되는 테스트 결과

## React Testing Library

UI 테스트에 특화된 라이브러리, E2E Test처럼 사용할 수 있다.

- 사용자 관점에서 테스트를 작성할 수 있다.
- 컴포넌트만을 위한 테스트가 되는것은 지양하자. 자칫 테스트가 불안정해지거나, 유지보수가 어려워 질 수 있다.

## E2E 테스트

End to End 테스트라고 하며 애플리케이션의 흐름을 처음부터 끝까지(End to End) 테스트하는 방법이다.
E2E 테스트는 사용자 관점에서 테스트를 진행한다.

- 사용자가 실제로 사용하는 환경(브라우저)에서 테스트를 진행한다.
- 사용자가 실제로 사용하는 환경이기 때문에 비교적 테스트가 느리다.
  - 이부분 때문에 병렬테스트를 하기위한 도구들을 사용한다.
- 사용자 관점에서 테스트를 진행하기 때문에 테스트 코드를 작성하기 어렵다.
- 테스트 도구 설치는 대체로 간단하지만, 테스트 작성이나 유지보수가 어렵기때문에 애물단지가 되기 쉽다.

## 테스트는 어떤것이 있을까 ?

테스트에는 여러가지있으며 크게 4가지 테스트로 구분할 수 있다.  
Static(정적) -> Unit(단위) -> Integration(통합) -> E2E(End to End) 왼쪽에서 오른쪽으로 갈수록 비용이 높아지고 느리며, 테스트의 범위가 넓어진다.

- 정적 테스트(Static): 코드를 실행하지 않고 분석하는 방법
  - 타입스크립트나 ESLint같은 정적 분석 도구를 사용한다.
- 유닛 테스트(Unit): 코드의 최소 단위를 테스트하는 방법
  - Jest, React Testing Library, Enzyme 등을 사용한다.
- 통합 테스트(Integration): 코드의 최소 단위를 테스트하는 방법
  - 알아봐야함
- E2E 테스트(End to End): 사용자 관점에서 테스트를 진행하는 방법
  - Cypress, Selenium 등을 사용한다.

## 테스트를 왜 하는 걸까?

- 버그를 줄일 수 있다.
- 프로젝트가 커질수록 사이드이펙트 걱정에서 좀 더 마음 편하게 리팩토링을 더 쉽게 할 수 있다. (신뢰성)
- 즉각적인 피드백을 통해 개발 속도를 높일 수 있다.
- 테스트 코드 작성을 하다보면 일관성 있는 코드를 작성하게 된다.
- 테스트 코드를 작성하면서 코드를 리팩토링하게 되면서 코드의 품질을 높일 수 있다.

## 테스트... 어떻게 해

테스트를 작성하면 작성 및 유지보수를 해야하기 때문에 비용이 발생한다.  
또 팀에서 테스트를 작성하는것에 대한 합의가 없다면 이를 설득해야하는 비용도 발생한다.  
항상 무언가를 도입하는것은 trade-off가 있다는 점을 명심하고 득과실을 잘 따져보자.  
만약 정말 일정이 말이안되거나, 주변 여러가지 요인 때문에 테스트를 작성하기 어려운 상황이라면(거의 없겠지만 극단적인 상황) 테스트를 고집하는것이 오히려 프로젝트에 악영향을 끼칠 수 있다.  
테스트를 작성하는것은 좋지만, 테스트를 고집하는것은 좋지 않다고 생각한다. 때문에 항상 유연한 사고방식을 갖고 자신의 상황에 맞게 테스트를 도입하자.
